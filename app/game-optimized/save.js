define(["angular"],function(){var e={name:"BR-S",salt:"BRKey",saveInterval:undefined,save:function(e){var t={money:game.money,totalMoney:game.totalMoney,level:game.level,reputation:game.reputation,reputationNeed:game.reputationNeed,actionsProgress:game.actions.progress,actionsOwned:game.actions.owned,actionsRewardMultiplier:game.actions.rewardMultiplier,actionsTotalRewardMultiplier:game.actions.totalRewardMultiplier,actionsTimeMultiplier:game.actions.timeMultiplier,actionsTotalTimeMultiplier:game.actions.totalTimeMultiplier,actionsCurrentRep:game.actions.currentRep,researchActionsBought:game.research.actions.bought,collectionsOwned:game.collections.owned,optionsBefore:game.options.before,optionsFirstTime:game.options.firstTime};localStorage.setItem(this.name+this.salt,JSON.stringify(t)),e=="user"&&notify.pop("success","Game successfully saved!"),log("Game saved.")},load:function(e){if(localStorage.getItem(this.name+this.salt)===null)notify.pop("alert","No save found!");else{var t=JSON.parse(localStorage.getItem(this.name+this.salt));game.money=t.money,game.totalMoney=t.totalMoney,game.level=t.level,game.reputation=t.reputation,game.reputationNeed=t.reputationNeed,game.actions.progress=t.actionsProgress,game.actions.owned=t.actionsOwned,game.actions.rewardMultiplier=t.actionsRewardMultiplier,game.actions.totalRewardMultiplier=t.actionsTotalRewardMultiplier,game.actions.timeMultiplier=t.actionsTimeMultiplier,game.actions.totalTimeMultiplier=t.actionsTotalTimeMultiplier,game.actions.currentRep=t.actionsCurrentRep,game.research.actions.bought=t.researchActionsBought,game.options.before=t.optionsBefore,game.options.firstTime=t.optionsFirstTime,game.collections.owned=t.collectionsOwned,game.research.display(),e=="user"&&notify.pop("success","Save-game successfully loaded!"),log("Savegame loaded.")}},eventListenerSave:function(){game.save.save()},reset:function(e,t){$("#options-reset").html("Really?"),$("#options-yes, #options-no").show(),$("#options-reset").addClass("really"),e&&(this.saveInterval=undefined,window.removeEventListener("beforeunload",game.save.eventListenerSave,!1),localStorage.removeItem(this.name+this.salt),window.history.pushState("","","/#/"),window.location.reload()),t&&($("#options-reset").html("Hard-reset"),$("#options-yes, #options-no").hide(),$("#options-reset").removeClass("really"))},setInt:function(){this.saveInterval=window.setInterval(function(){game.save.save()},1e3)},init:function(){this.setInt(),window.game.save=this,window.addEventListener("beforeunload",game.save.eventListenerSave,!1),log("Save init.")}};return e.init()});