define(["angular"],function(){var e={list:["Weed","Meth","Cocaine"],prices:[1e5,15e7,75e8],multipliers:new Array,totalMultiplier:1,stock:new Array,invested:!1,investPrice:15e11,alert:[!1,!1,!1],prod:{weed:new Array,weedOwned:new Array,weedPerSec:new Array,meth:new Array,methOwned:new Array,methPerSec:new Array,cocaine:new Array,cocaineOwned:new Array,cocainePerSec:new Array,getWhat:function(e,t,n){var r=game.production.list[e].toLowerCase(),i=n.toLowerCase(),s=window.game.production.prod[r][t][i];return s},getDrugPerSec:function(e){var t=game.production.list[e].toLowerCase(),n=window.game.production.prod[t+"PerSec"],r=0;for(var i=0;i<n.length;i++)r+=n[i];return r},getReward:function(e,t){var n=game.production.prod.getWhat(e,t,"reward");return n},getRewardOwned:function(e,t){var n=game.production.list[e].toLowerCase(),r=game.production.prod.getWhat(e,t,"reward"),i=window.game.production.prod[n+"Owned"][t];return r*i},getPrice:function(e,t){var n=game.production.list[e].toLowerCase(),r=game.production.prod.getWhat(e,t,"price"),i=game.production.prod.getWhat(e,t,"inflation"),s=window.game.production.prod[n+"Owned"][t];return r*Math.pow(i,s)},buy:function(e,t){var n=this.getPrice(e,t);if(game.money>=n){game.money-=n;var r=game.production.list[e].toLowerCase();window.game.production.prod[r+"Owned"][t]++,window.game.production.prod[r+"PerSec"][t]+=this.getReward(e,t),this.display()}},run:function(e){if(!game.options.pause)for(var t=0;t<game.production.list.length;t++)if(!game.production.alert[t]){var n=this.getDrugPerSec(t)*e/game.options.fps;window.game.production.stock[t]+=n}},display:function(){for(var e=0;e<game.production.list.length;e++){var t=game.production.list[e].toLowerCase(),n=window.game.production.prod[t];for(var r=0;r<n.length;r++){var i={name:n[r].name,owned:window.game.production.prod[t+"Owned"],reward:this.getReward(e,r),price:this.getPrice(e,r)};$("#production-"+t+"-"+(r+1)).html(i.name+"<span>"+i.owned[r]+" owned</span><br>+"+fix(i.reward,2)+"g/sec"+"<span>$"+fix(i.price,2)+"</span>")}}}},sell:{weed:new Array,weedOwned:new Array,weedPerSec:new Array,meth:new Array,methOwned:new Array,methPerSec:new Array,cocaine:new Array,cocaineOwned:new Array,cocainePerSec:new Array,getWhat:function(e,t,n){var r=game.production.list[e].toLowerCase(),i=n.toLowerCase(),s=window.game.production.sell[r][t][i];return s},getDealerSell:function(e,t){var n=game.production.list[e].toLowerCase(),r=window.game.production.sell[n][t].reward,i=window.game.production.sell[n+"Owned"][t],s=i*r;return s},getDrugPerSec:function(e){var t=game.production.list[e].toLowerCase(),n=window.game.production.sell[t+"PerSec"],r=0;for(var i=0;i<n.length;i++)r+=n[i];return r},getPrice:function(e,t){var n=game.production.list[e].toLowerCase(),r=game.production.sell.getWhat(e,t,"price"),i=game.production.sell.getWhat(e,t,"inflation"),s=window.game.production.sell[n+"Owned"][t];return r*Math.pow(i,s)},getReward:function(e,t){var n=this.getWhat(e,t,"reward");return n},getSellAllPrice:function(e){var t=game.production.getDrugReward(e),n=25*t/100;return n},sellAll:function(e){var t=game.production.getDrugReward(e),n=25*t/100,r=n*game.production.stock[e];game.production.stock[e]=0,game.gainMoney(r)},display:function(){for(var e=0;e<game.production.list.length;e++){var t=game.production.list[e].toLowerCase(),n=window.game.production.sell[t];for(var r=0;r<n.length;r++){var i={name:n[r].name,owned:window.game.production.sell[t+"Owned"],reward:this.getReward(e,r),price:this.getPrice(e,r)};$("#selling-"+t+"-"+(r+1)).html(i.name+"<span>"+i.owned[r]+" owned</span><br>Sell "+fix(i.reward,2)+"g/sec"+"<span>$"+fix(i.price,2)+"</span>")}}},run:function(e){if(!game.options.pause)for(var t=0;t<game.production.list.length;t++){var n=game.production.list[t].toLowerCase(),r=game.production.getDrugReward(t),i=this.getDrugPerSec(t)*e/game.options.fps,s=game.production.prod.getDrugPerSec(t)*e/game.options.fps,o=s*r;game.production.alert[t]==0?(i>s&&(game.production.alert[t]="notify",game.production.alert[t]=="notify"&&(notify.pop("alert","Production warning: you sell more "+n+" than you can produce, selling for "+n+" is disabled until you can sell as much as you produce."),game.production.alert[t]=!0)),i<=s&&(o=i*r,game.production.stock[t]-=i,game.gainMoney(o))):i<=s&&(notify.pop("success","Production news: you now produce enough "+n+" to sell it."),game.production.alert[t]=!1)}},buy:function(e,t){var n=this.getPrice(e,t);if(game.money>=n){game.money-=n;var r=game.production.list[e].toLowerCase();window.game.production.sell[r+"Owned"][t]++,window.game.production.sell[r+"PerSec"][t]+=this.getReward(e,t),this.display()}}},getDrugReward:function(e){return this.prices[e]*this.multipliers[e]*this.totalMultiplier},invest:function(){game.money>=this.investPrice&&!this.invested&&(game.money-=this.investPrice,this.invested=!0,$("#production-locked").fadeOut("slow",function(){$("#production-unlocked").fadeIn("slow")}))},create:function(e,t,n,r){this.name=e,this.price=t,this.reward=n,this.inflation=r},display:function(){this.prod.display(),this.sell.display()},displayDrugs:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e].toLowerCase(),n=window.game.production.prod[t];for(var r=0;r<n.length;r++){var i={name:this.list[e],stock:this.stock[e],plus:this.prod.getDrugPerSec(e),minus:this.sell.getDrugPerSec(e),price:this.getDrugReward(e)};$("#"+t+"-stock").html(i.name+": "+fix(i.stock,2)+"g<br><small>(+"+fix(i.plus,3)+"g/s ; -"+fix(i.minus,3)+"g/s)</small><br>"+"<small>($"+fix(i.price,2)+"/g)</small>")}}},run:function(e){this.prod.run(e),this.sell.run(e)},varInit:function(){this.prod.weed=[new this.create("Backyard",15e6,.5,1.6),new this.create("Green House",5e9,2,1.5),new this.create("Brazilian Farm",15e13,4,1.3)],this.prod.meth=[new this.create("Mobile RV Lab",25e8,.5,1.6),new this.create("Basement Lab",15e11,2,1.5),new this.create("Professional Chemical Lab",5e16,4,1.3)],this.prod.cocaine=[new this.create("Small Farm",75e10,.5,1.6),new this.create("Bolivian Farm",3e14,2,1.5),new this.create("Columbian Estate",75e17,4,1.3)],this.sell.weed=[new this.create("Backyard Dealer",15e6,.5,1.6),new this.create("Downtown Dealer",5e9,2,1.5),new this.create("Nightclub Owner",15e13,4,1.3)],this.sell.meth=[new this.create("Dark Alley",25e8,.5,1.6),new this.create("Meth House",15e11,2,1.5),new this.create("Mafia Associates",5e16,4,1.3)],this.sell.cocaine=[new this.create("Casino Owner",75e10,.5,1.6),new this.create("Executive's Club Chairman",3e14,2,1.5),new this.create("Drug Trafficking Syndicate",75e17,4,1.3)];for(var e=0;e<this.prod.weed.length;e++)this.prod.weedOwned.push(0),this.prod.weedPerSec.push(0),this.sell.weedOwned.push(0),this.sell.weedPerSec.push(0);for(var e=0;e<this.prod.meth.length;e++)this.prod.methOwned.push(0),this.prod.methPerSec.push(0),this.sell.methOwned.push(0),this.sell.methPerSec.push(0);for(var e=0;e<this.prod.cocaine.length;e++)this.prod.cocaineOwned.push(0),this.prod.cocainePerSec.push(0),this.sell.cocaineOwned.push(0),this.sell.cocainePerSec.push(0);for(var e=0;e<this.list.length;e++)this.stock.push(0),this.multipliers.push(1)},domInit:function(){$("#production-invest").attr("onclick","game.production.invest();"),this.invested&&($("#production-locked").css("display","none"),$("#production-unlocked").css("display","block"));for(var e=0;e<game.production.list.length;e++){var t=this.sell.getSellAllPrice(e),n=game.production.list[e].toLowerCase(),r=window.game.production.prod[n];$("#"+n+"-sellall").attr("onclick","game.production.sell.sellAll("+e+");"),$("#"+n+"-sellall").html("Sell "+n+" stock :<br>$"+fix(t,0)+"/g");for(var i=0;i<r.length;i++)$("#production-"+n+"-"+(i+1)).attr("onclick","game.production.prod.buy("+e+","+i+");"),$("#selling-"+n+"-"+(i+1)).attr("onclick","game.production.sell.buy("+e+","+i+");")}this.display()},angularInit:function(){this.domInit()},init:function(){this.varInit(),window.game.production=this,log("Production init.")}};return e.init()});