define(["angular"],function(){var e={list:["Weed","Meth","Cocaine"],prices:[1e5,15e7,75e8],multipliers:new Array,totalRewardMultiplier:1,stock:new Array,invested:!1,investPrice:15e11,alert:[!1,!1,!1],prod:{weed:new Array,weedOwned:new Array,weedPerSec:new Array,meth:new Array,methOwned:new Array,methPerSec:new Array,cocaine:new Array,cocaineOwned:new Array,cocainePerSec:new Array,getWhat:function(e,t,r){var o=game.production.list[e].toLowerCase(),i=r.toLowerCase(),n=window.game.production.prod[o][t][i];return n},getDrugPerSec:function(e){for(var t=game.production.list[e].toLowerCase(),r=window.game.production.prod[t+"PerSec"],o=0,i=0;i<r.length;i++)o+=r[i];return o},getReward:function(e,t){var r=game.production.prod.getWhat(e,t,"reward");return r},getRewardOwned:function(e,t){var r=game.production.list[e].toLowerCase(),o=game.production.prod.getWhat(e,t,"reward"),i=window.game.production.prod[r+"Owned"][t];return o*i},getPrice:function(e,t){var r=game.production.list[e].toLowerCase(),o=game.production.prod.getWhat(e,t,"price"),i=game.production.prod.getWhat(e,t,"inflation"),n=window.game.production.prod[r+"Owned"][t];return o*Math.pow(i,n)},buy:function(e,t){var r=this.getPrice(e,t);if(game.money>=r){game.money-=r;var o=game.production.list[e].toLowerCase();window.game.production.prod[o+"Owned"][t]++,window.game.production.prod[o+"PerSec"][t]+=this.getReward(e,t),this.display()}},run:function(e){if(!game.options.pause)for(var t=0;t<game.production.list.length;t++)if(!game.production.alert[t]){var r=this.getDrugPerSec(t)*e/game.options.fps;window.game.production.stock[t]+=r}},display:function(){for(var e=0;e<game.production.list.length;e++)for(var t=game.production.list[e].toLowerCase(),r=window.game.production.prod[t],o=0;o<r.length;o++){var i={name:r[o].name,owned:window.game.production.prod[t+"Owned"],reward:this.getReward(e,o),price:this.getPrice(e,o)};$("#production-"+t+"-"+(o+1)).html(i.name+"<span>"+i.owned[o]+" owned</span><br>+"+fix(i.reward,2)+"g/sec<span>$"+fix(i.price,2)+"</span>")}}},sell:{weed:new Array,weedOwned:new Array,weedPerSec:new Array,meth:new Array,methOwned:new Array,methPerSec:new Array,cocaine:new Array,cocaineOwned:new Array,cocainePerSec:new Array,getWhat:function(e,t,r){var o=game.production.list[e].toLowerCase(),i=r.toLowerCase(),n=window.game.production.sell[o][t][i];return n},getDealerSell:function(e,t){var r=game.production.list[e].toLowerCase(),o=window.game.production.sell[r][t].reward,i=window.game.production.sell[r+"Owned"][t],n=i*o;return n},getDrugPerSec:function(e){for(var t=game.production.list[e].toLowerCase(),r=window.game.production.sell[t+"PerSec"],o=0,i=0;i<r.length;i++)o+=r[i];return o},getPrice:function(e,t){var r=game.production.list[e].toLowerCase(),o=game.production.sell.getWhat(e,t,"price"),i=game.production.sell.getWhat(e,t,"inflation"),n=window.game.production.sell[r+"Owned"][t];return o*Math.pow(i,n)},getReward:function(e,t){var r=this.getWhat(e,t,"reward");return r},getSellAllPrice:function(e){var t=game.production.getDrugReward(e),r=25*t/100;return r},sellAll:function(e){var t=game.production.getDrugReward(e),r=25*t/100,o=r*game.production.stock[e];game.production.stock[e]=0,game.gainMoney(o)},display:function(){for(var e=0;e<game.production.list.length;e++)for(var t=game.production.list[e].toLowerCase(),r=window.game.production.sell[t],o=0;o<r.length;o++){var i={name:r[o].name,owned:window.game.production.sell[t+"Owned"],reward:this.getReward(e,o),price:this.getPrice(e,o)};$("#selling-"+t+"-"+(o+1)).html(i.name+"<span>"+i.owned[o]+" owned</span><br>Sell "+fix(i.reward,2)+"g/sec<span>$"+fix(i.price,2)+"</span>")}},run:function(e){if(!game.options.pause)for(var t=0;t<game.production.list.length;t++){var r=game.production.list[t].toLowerCase(),o=game.production.getDrugReward(t),i=this.getDrugPerSec(t)*e/game.options.fps,n=game.production.prod.getDrugPerSec(t)*e/game.options.fps,a=n*o,s="#"+r+"-stock";0==game.production.alert[t]?(i>n&&(game.production.alert[t]="notify","notify"==game.production.alert[t]&&(notify.pop("alert","Production warning: you sell more "+r+" than you can produce, selling for "+r+" is disabled until you can sell as much as you produce."),game.production.alert[t]=!0,$(s).addClass("alert-danger"))),n>=i&&(a=i*o,game.production.stock[t]-=i,game.gainMoney(a))):n>=i&&(notify.pop("success","Production news: you now produce enough "+r+" to sell it."),game.production.alert[t]=!1,$(s).removeClass("alert-danger"))}},buy:function(e,t){var r=this.getPrice(e,t);if(game.money>=r){game.money-=r;var o=game.production.list[e].toLowerCase();window.game.production.sell[o+"Owned"][t]++,window.game.production.sell[o+"PerSec"][t]+=this.getReward(e,t),this.display()}}},getDrugReward:function(e){return this.prices[e]*this.multipliers[e]*this.totalRewardMultiplier},invest:function(){game.money>=this.investPrice&&!this.invested&&(game.money-=this.investPrice,this.invested=!0,$("#production-locked").fadeOut("slow",function(){$("#production-unlocked").fadeIn("slow")}))},create:function(e,t,r,o){this.name=e,this.price=t,this.reward=r,this.inflation=o},display:function(){this.prod.display(),this.sell.display()},displayDrugs:function(){for(var e=0;e<this.list.length;e++)for(var t=this.list[e].toLowerCase(),r=window.game.production.prod[t],o=0;o<r.length;o++){var i={name:this.list[e],stock:this.stock[e],plus:this.prod.getDrugPerSec(e),minus:this.sell.getDrugPerSec(e),price:this.getDrugReward(e)};$("#"+t+"-stock").html(i.name+": "+fix(i.stock,2)+"g<br><small>(+"+fix(i.plus,3)+"g/s ; -"+fix(i.minus,3)+"g/s)</small><br><small>($"+fix(i.price,2)+"/g)</small>")}},run:function(e){this.prod.run(e),this.sell.run(e)},varInit:function(){this.prod.weed=[new this.create("Backyard",15e6,.5,1.6),new this.create("Green House",5e9,2,1.5),new this.create("Brazilian Farm",15e13,4,1.3)],this.prod.meth=[new this.create("Mobile RV Lab",25e8,.5,1.6),new this.create("Basement Lab",15e11,2,1.5),new this.create("Professional Chemical Lab",5e16,4,1.3)],this.prod.cocaine=[new this.create("Small Farm",75e10,.5,1.6),new this.create("Bolivian Farm",3e14,2,1.5),new this.create("Columbian Estate",75e17,4,1.3)],this.sell.weed=[new this.create("Backyard Dealer",15e6,.5,1.6),new this.create("Downtown Dealer",5e9,2,1.5),new this.create("Nightclub Owner",15e13,4,1.3)],this.sell.meth=[new this.create("Dark Alley",25e8,.5,1.6),new this.create("Meth House",15e11,2,1.5),new this.create("Mafia Associates",5e16,4,1.3)],this.sell.cocaine=[new this.create("Casino Owner",75e10,.5,1.6),new this.create("Executive's Club Chairman",3e14,2,1.5),new this.create("Drug Trafficking Syndicate",75e17,4,1.3)];for(var e=0;e<this.prod.weed.length;e++)this.prod.weedOwned.push(0),this.prod.weedPerSec.push(0),this.sell.weedOwned.push(0),this.sell.weedPerSec.push(0);for(var e=0;e<this.prod.meth.length;e++)this.prod.methOwned.push(0),this.prod.methPerSec.push(0),this.sell.methOwned.push(0),this.sell.methPerSec.push(0);for(var e=0;e<this.prod.cocaine.length;e++)this.prod.cocaineOwned.push(0),this.prod.cocainePerSec.push(0),this.sell.cocaineOwned.push(0),this.sell.cocainePerSec.push(0);for(var e=0;e<this.list.length;e++)this.stock.push(0),this.multipliers.push(1)},domInit:function(){$("#production-invest").attr("onclick","game.production.invest();"),this.invested&&($("#production-locked").css("display","none"),$("#production-unlocked").css("display","block"));for(var e=0;e<game.production.list.length;e++){var t=this.sell.getSellAllPrice(e),r=game.production.list[e].toLowerCase(),o=window.game.production.prod[r];$("#"+r+"-sellall").attr("onclick","game.production.sell.sellAll("+e+");"),$("#"+r+"-sellall").html("Sell "+r+" stock :<br>$"+fix(t,0)+"/g");for(var i=0;i<o.length;i++)$("#production-"+r+"-"+(i+1)).attr("onclick","game.production.prod.buy("+e+","+i+");"),$("#selling-"+r+"-"+(i+1)).attr("onclick","game.production.sell.buy("+e+","+i+");")}this.display()},angularInit:function(){this.domInit()},init:function(){this.varInit(),window.game.production=this,log("Production init.")}};return e.init()});